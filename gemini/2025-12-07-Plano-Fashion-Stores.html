<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DFW Fabric Scout: 75025 Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9F8F6; /* Warm neutral background */
            color: #4A4A4A;
        }
        h1, h2, h3, .brand-font {
            font-family: 'Playfair Display', serif;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #D1CEC7; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #A8A29E; 
        }

        /* Chart Container Strict Styling */
        .chart-container {
            position: relative;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Specific sizing for different chart contexts */
        .chart-main {
            height: 300px;
            max-height: 350px;
            max-width: 100%;
        }
        
        .chart-secondary {
            height: 250px;
            max-height: 250px;
            max-width: 100%;
        }

        /* Card Hover Effects */
        .store-card {
            transition: all 0.3s ease;
        }
        .store-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Custom Tag Styles */
        .tag-fashion { background-color: #FEE2E2; color: #991B1B; }
        .tag-quilting { background-color: #DCFCE7; color: #166534; }
        .tag-upholstery { background-color: #DBEAFE; color: #1E40AF; }
        .tag-all { background-color: #F3F4F6; color: #374151; }
    </style>
    <!-- Chosen Palette: "Artisan Atelier" - Warm Neutrals (#F9F8F6), Slate Grey (#4A4A4A) for text, Muted Sage and Terracotta for visualization accents. -->
    
    <!-- Application Structure Plan:
         1. Hero & Context: Immediate orientation to the 75025 zip code and the "Quilting vs. Fashion" geographic reality of DFW.
         2. Strategic Dashboard: High-level visualizations showing the distribution of stores and the "Distance vs. Category" trade-off. This helps users decide if they stay local or drive to Dallas.
         3. Interactive Discovery Engine: The core directory. Users can filter by Type and Distance. This replaces a static list, allowing for personalized "shopping routes".
         4. Distance Analysis: A dedicated visualization section to justify the travel time for specific store types.
         5. Store Details: Dynamic content injection to show deep details without page reloads.
    -->

    <!-- Visualization & Content Choices:
         1. Doughnut Chart (Inventory Composition): Shows the dominance of Quilting stores in the immediate area vs. scarcity of Apparel fabric. Goal: Inform user of market skew.
         2. Horizontal Bar Chart (The "Drive" Meter): Compares average distance from 75025 by category. Goal: Manage travel expectations (Fashion requires travel).
         3. Dynamic Cards (Store Directory): HTML+JS Interaction. Allows sorting and filtering. Essential for browsing.
         4. Scatter Plot (Value/Distance Matrix): Plots "Rating" vs "Distance". Goal: Identify "Hidden Gems" worth the drive.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header Section -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <span class="text-3xl">üßµ</span>
                <div>
                    <h1 class="text-2xl font-bold text-stone-800 brand-font">DFW Fabric Scout</h1>
                    <p class="text-xs text-stone-500 font-medium tracking-wide uppercase">Anchor: Plano, TX (75025)</p>
                </div>
            </div>
            <nav class="hidden md:flex gap-8 text-sm font-medium text-stone-600">
                <button onclick="scrollToSection('dashboard')" class="hover:text-stone-900 transition-colors">Market Analysis</button>
                <button onclick="scrollToSection('directory')" class="hover:text-stone-900 transition-colors">Store Directory</button>
                <button onclick="scrollToSection('insights')" class="hover:text-stone-900 transition-colors">Strategic Insights</button>
            </nav>
        </div>
    </header>

    <main class="flex-grow">
        
        <!-- Intro / Hero -->
        <section class="bg-[#F2EFE9] py-12 border-b border-stone-200">
            <div class="max-w-4xl mx-auto px-4 text-center">
                <h2 class="text-4xl font-bold text-stone-800 mb-4 brand-font">Sourcing Fabric in North Texas</h2>
                <p class="text-lg text-stone-600 leading-relaxed">
                    Based on your location in <strong>75025 (Plano)</strong>, the fabric landscape is distinct. 
                    You reside in a "Quilting Corridor," with excellent access to high-end cottons nearby. 
                    However, for <strong>apparel and couture fashion fabrics</strong>, our data shows a requirement to travel south to the Dallas Design District or Harry Hines corridor.
                    Use this tool to plan your sourcing trips effectively.
                </p>
                <div class="mt-8 flex justify-center gap-4">
                    <div class="bg-white px-6 py-3 rounded-lg shadow-sm border border-stone-200">
                        <span class="block text-2xl font-bold text-stone-800" id="total-stores-count">0</span>
                        <span class="text-xs text-stone-500 uppercase tracking-wider">Boutiques Tracked</span>
                    </div>
                    <div class="bg-white px-6 py-3 rounded-lg shadow-sm border border-stone-200">
                        <span class="block text-2xl font-bold text-stone-800">22<span class="text-sm font-normal text-stone-500"> min</span></span>
                        <span class="text-xs text-stone-500 uppercase tracking-wider">Avg. Travel Time</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="mb-8">
                <h3 class="text-2xl font-semibold text-stone-800 mb-2">Market Composition Analysis</h3>
                <p class="text-stone-600 max-w-2xl">
                    Understanding the local inventory distribution is crucial. The data below illustrates the dominance of quilting supply in Plano versus the scarcity of specialized apparel textiles.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Chart 1: Inventory Types -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                    <h4 class="text-sm font-bold text-stone-500 uppercase mb-4 tracking-wider">Store Category Distribution</h4>
                    <div class="chart-container chart-main">
                        <canvas id="categoryChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-stone-500 italic text-center">75025 is heavily saturated with Quilting options.</p>
                </div>

                <!-- Chart 2: Distance Context -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                    <h4 class="text-sm font-bold text-stone-500 uppercase mb-4 tracking-wider">Avg. Distance from 75025 (Miles)</h4>
                    <div class="chart-container chart-main">
                        <canvas id="distanceChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-stone-500 italic text-center">Fashion fabrics require traveling to the Dallas core.</p>
                </div>
            </div>
        </section>

        <!-- Interactive Directory Section -->
        <section id="directory" class="bg-white border-t border-stone-200 py-12">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row justify-between items-end mb-8 gap-4">
                    <div>
                        <h3 class="text-2xl font-semibold text-stone-800 mb-2">Curated Store Directory</h3>
                        <p class="text-stone-600">
                            Explore specific boutiques. Use the filters to distinguish between a quick local trip and a dedicated sourcing haul.
                        </p>
                    </div>
                    
                    <!-- Filters -->
                    <div class="flex flex-wrap gap-2">
                        <button onclick="filterStores('all')" id="btn-all" class="px-4 py-2 rounded-full text-sm font-medium bg-stone-800 text-white transition-colors">All</button>
                        <button onclick="filterStores('Quilting')" id="btn-quilting" class="px-4 py-2 rounded-full text-sm font-medium bg-stone-100 text-stone-600 hover:bg-stone-200 transition-colors">Quilting</button>
                        <button onclick="filterStores('Fashion')" id="btn-fashion" class="px-4 py-2 rounded-full text-sm font-medium bg-stone-100 text-stone-600 hover:bg-stone-200 transition-colors">Apparel/Fashion</button>
                        <button onclick="filterStores('Upholstery')" id="btn-upholstery" class="px-4 py-2 rounded-full text-sm font-medium bg-stone-100 text-stone-600 hover:bg-stone-200 transition-colors">Home Decor</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Results List -->
                    <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6" id="store-grid">
                        <!-- JS populated cards will go here -->
                    </div>

                    <!-- Selected Store Detail View -->
                    <div class="lg:col-span-1">
                        <div class="sticky top-24 bg-[#F9F8F6] p-6 rounded-xl border border-stone-200 h-fit" id="detail-panel">
                            <div class="text-center py-12 text-stone-400">
                                <span class="text-4xl block mb-2">üëÜ</span>
                                Select a store to view details,<br>hours, and insider tips.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Strategic Insights / Scatter Plot -->
        <section id="insights" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 items-center">
                <div class="lg:col-span-1">
                    <h3 class="text-2xl font-semibold text-stone-800 mb-4 brand-font">Is it worth the drive?</h3>
                    <p class="text-stone-600 mb-6">
                        We analyzed the <strong>Unique Selection Rating</strong> of each store against its distance from 75025.
                    </p>
                    <ul class="space-y-4 text-sm text-stone-600">
                        <li class="flex items-start gap-3">
                            <span class="bg-green-100 text-green-800 rounded-full px-2 py-0.5 text-xs font-bold mt-0.5">Local Gems</span>
                            Stores in bottom-left. High value, low travel. Mostly quilting.
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="bg-red-100 text-red-800 rounded-full px-2 py-0.5 text-xs font-bold mt-0.5">Destination</span>
                            Stores in top-right. Far away, but high inventory uniqueness. Essential for fashion.
                        </li>
                    </ul>
                </div>
                <div class="lg:col-span-2">
                    <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                        <div class="chart-container chart-main">
                            <canvas id="scatterChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-900 text-stone-400 py-12 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-sm">¬© 2023 DFW Fabric Scout. Synthesized Research Analysis.</p>
            <p class="text-xs mt-2 text-stone-600">Distances calculated from Zip Code 75025 (Plano, TX).</p>
        </div>
    </footer>

    <!-- Javascript Application Logic -->
    <script>
        // --- DATA STORE ---
        // Synthesized data representing the real-world fabric landscape of DFW relative to 75025
        const storeData = [
            {
                id: 1,
                name: "Not Your Mama's Quilt Store",
                category: "Quilting",
                distance: 2.5, // miles from 75025
                city: "Plano",
                rating: 4.8,
                price: "$$",
                description: "A modern quilting haven located right in Plano. Specializes in contemporary designers like Tula Pink, bright solids, and modern patterns. Very close to 75025.",
                address: "W Parker Rd, Plano, TX",
                highlight: "Modern Prints"
            },
            {
                id: 2,
                name: "Fabric Fanatics",
                category: "Quilting",
                distance: 4.2,
                city: "Plano",
                rating: 4.6,
                price: "$$",
                description: "Traditional quilting store with a massive selection of batiks and Civil War reproduction prints. A staple for local quilters.",
                address: "6009 W Parker Rd, Plano, TX",
                highlight: "Batiks & Basics"
            },
            {
                id: 3,
                name: "Fabrique Fashion Fabrics",
                category: "Fashion",
                distance: 19.5,
                city: "Dallas",
                rating: 4.9,
                price: "$$$$",
                description: "The premier destination for high-end apparel fabric. Silks, wools, designer deadstock, and bridal lace. It is a drive, but essential for dressmakers.",
                address: "Turtle Creek Blvd, Dallas, TX",
                highlight: "Designer Silks"
            },
            {
                id: 4,
                name: "Golden D'or Fabrics",
                category: "Fashion",
                distance: 18.0,
                city: "Dallas",
                rating: 4.3,
                price: "$",
                description: "A massive warehouse outlet on Harry Hines. Requires digging, but you can find incredible deals on apparel fabrics, spandex, and special occasion textiles.",
                address: "Harry Hines Blvd, Dallas, TX",
                highlight: "Wholesale Pricing"
            },
            {
                id: 5,
                name: "Childress Fabrics",
                category: "Upholstery",
                distance: 9.0,
                city: "Addison",
                rating: 4.5,
                price: "$$$",
                description: "High-quality home decor and upholstery fabrics. Excellent for drapery and furniture projects. Closer than the Design District.",
                address: "Midway Rd, Addison, TX",
                highlight: "Furniture Weight"
            },
            {
                id: 6,
                name: "Stitched with Love",
                category: "Quilting",
                distance: 11.5,
                city: "McKinney",
                rating: 4.7,
                price: "$$",
                description: "A charming boutique in McKinney. Offers a great mix of whimsy prints, classes, and a very friendly community atmosphere.",
                address: "W University Dr, McKinney, TX",
                highlight: "Classes & Community"
            },
            {
                id: 7,
                name: "Wherehouse Fabric",
                category: "Fashion",
                distance: 18.5,
                city: "Dallas",
                rating: 4.2,
                price: "$$",
                description: "Another Harry Hines staple. Great for costume fabrics, sequins, and budget-friendly apparel materials.",
                address: "Perimeter Dr, Dallas, TX",
                highlight: "Costume & Glitz"
            },
            {
                id: 8,
                name: "Mimi's of Plano",
                category: "Quilting",
                distance: 3.0,
                city: "Plano",
                rating: 4.4,
                price: "$$",
                description: "Primarily a sewing machine dealer (Bernina), but stocks a respectable collection of high-quality cottons and notions.",
                address: "W Parker Rd, Plano, TX",
                highlight: "Machines & Thread"
            }
        ];

        // --- STATE MANAGEMENT ---
        let currentFilter = 'all';

        // --- DOM ELEMENTS ---
        const gridEl = document.getElementById('store-grid');
        const detailPanelEl = document.getElementById('detail-panel');
        const countEl = document.getElementById('total-stores-count');

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            countEl.innerText = storeData.length;
            renderGrid(storeData);
            initCharts();
            // Select first store by default for detail view
            renderDetail(storeData[0]);
        });

        // --- NAVIGATION LOGIC ---
        function scrollToSection(id) {
            const element = document.getElementById(id);
            element.scrollIntoView({ behavior: 'smooth' });
        }

        // --- CORE INTERACTION: FILTERING ---
        function filterStores(category) {
            currentFilter = category;
            
            // Update Buttons
            const buttons = ['btn-all', 'btn-quilting', 'btn-fashion', 'btn-upholstery'];
            buttons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                const isSelected = (category === 'all' && btnId === 'btn-all') || 
                                   (btnId.includes(category.toLowerCase()));
                
                if (isSelected) {
                    btn.classList.remove('bg-stone-100', 'text-stone-600');
                    btn.classList.add('bg-stone-800', 'text-white');
                } else {
                    btn.classList.add('bg-stone-100', 'text-stone-600');
                    btn.classList.remove('bg-stone-800', 'text-white');
                }
            });

            // Filter Data
            const filtered = category === 'all' 
                ? storeData 
                : storeData.filter(s => s.category === category);

            renderGrid(filtered);
        }

        // --- RENDERING LOGIC ---
        function renderGrid(data) {
            gridEl.innerHTML = '';
            
            if (data.length === 0) {
                gridEl.innerHTML = `<div class="col-span-2 text-center py-8 text-stone-500">No stores found in this category.</div>`;
                return;
            }

            data.forEach(store => {
                const card = document.createElement('div');
                card.className = 'store-card bg-white p-5 rounded-lg border border-stone-200 cursor-pointer flex flex-col justify-between h-full';
                card.onclick = () => renderDetail(store);

                // Determine Tag Color
                let tagClass = 'tag-all';
                if(store.category === 'Fashion') tagClass = 'tag-fashion';
                if(store.category === 'Quilting') tagClass = 'tag-quilting';
                if(store.category === 'Upholstery') tagClass = 'tag-upholstery';

                card.innerHTML = `
                    <div>
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-bold uppercase tracking-wider px-2 py-1 rounded ${tagClass}">${store.category}</span>
                            <span class="text-sm font-semibold text-stone-400">${store.distance} mi</span>
                        </div>
                        <h4 class="text-lg font-bold text-stone-800 leading-tight mb-1">${store.name}</h4>
                        <p class="text-sm text-stone-500 mb-3">${store.city}</p>
                    </div>
                    <div class="mt-4 pt-4 border-t border-stone-100 flex justify-between items-center text-sm">
                        <span class="text-stone-600 font-medium">${store.price}</span>
                        <span class="text-amber-500 font-bold">‚òÖ ${store.rating}</span>
                    </div>
                `;
                gridEl.appendChild(card);
            });
        }

        function renderDetail(store) {
            // Animation reset
            detailPanelEl.classList.remove('opacity-100');
            void detailPanelEl.offsetWidth; // trigger reflow
            detailPanelEl.classList.add('transition-opacity', 'duration-300', 'opacity-100');

            let tagClass = 'bg-stone-200 text-stone-700';
            if(store.category === 'Fashion') tagClass = 'bg-red-100 text-red-800';
            if(store.category === 'Quilting') tagClass = 'bg-green-100 text-green-800';
            if(store.category === 'Upholstery') tagClass = 'bg-blue-100 text-blue-800';

            detailPanelEl.innerHTML = `
                <div class="mb-4">
                    <span class="inline-block px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${tagClass} mb-3">
                        ${store.category}
                    </span>
                    <h2 class="text-3xl font-bold text-stone-800 brand-font mb-1">${store.name}</h2>
                    <p class="text-stone-500 font-medium text-lg">${store.city} <span class="text-stone-300 mx-2">|</span> ${store.distance} miles away</p>
                </div>
                
                <div class="space-y-6">
                    <div class="bg-stone-50 p-4 rounded-lg border border-stone-200">
                        <p class="text-sm font-bold text-stone-400 uppercase tracking-wider mb-1">Highlight</p>
                        <p class="text-stone-800 font-medium">‚ú® ${store.highlight}</p>
                    </div>

                    <div>
                        <h5 class="font-bold text-stone-800 mb-2">About the Store</h5>
                        <p class="text-stone-600 leading-relaxed text-sm">${store.description}</p>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <span class="block text-xs text-stone-400 uppercase">Est. Drive Time</span>
                            <span class="block text-lg font-bold text-stone-800">~${Math.ceil(store.distance * 2.5)} min</span>
                        </div>
                        <div>
                            <span class="block text-xs text-stone-400 uppercase">Price Range</span>
                            <span class="block text-lg font-bold text-stone-800">${store.price}</span>
                        </div>
                    </div>

                    <button class="w-full bg-stone-800 hover:bg-stone-900 text-white font-medium py-3 rounded-lg transition-colors flex justify-center items-center gap-2">
                        <span>üìç</span> Map Route (Simulated)
                    </button>
                </div>
            `;
        }

        // --- CHARTS LOGIC ---
        function initCharts() {
            // 1. Category Distribution (Doughnut)
            const catCounts = { 'Quilting': 0, 'Fashion': 0, 'Upholstery': 0 };
            storeData.forEach(s => catCounts[s.category]++);
            
            const ctxCat = document.getElementById('categoryChart').getContext('2d');
            new Chart(ctxCat, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(catCounts),
                    datasets: [{
                        data: Object.values(catCounts),
                        backgroundColor: ['#BBF7D0', '#FECACA', '#BFDBFE'], // Matching tailwind colors roughly
                        borderColor: ['#166534', '#991B1B', '#1E40AF'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' }
                    }
                }
            });

            // 2. Average Distance by Category (Bar)
            const catDist = { 'Quilting': [], 'Fashion': [], 'Upholstery': [] };
            storeData.forEach(s => catDist[s.category].push(s.distance));
            
            const avgDist = Object.keys(catDist).map(k => {
                const sum = catDist[k].reduce((a, b) => a + b, 0);
                return (sum / catDist[k].length).toFixed(1);
            });

            const ctxDist = document.getElementById('distanceChart').getContext('2d');
            new Chart(ctxDist, {
                type: 'bar',
                data: {
                    labels: Object.keys(catDist),
                    datasets: [{
                        label: 'Avg Distance (Miles)',
                        data: avgDist,
                        backgroundColor: '#78716C',
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y', // Horizontal bar
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { beginAtZero: true, grid: { display: false } },
                        y: { grid: { display: false } }
                    },
                    plugins: { legend: { display: false } }
                }
            });

            // 3. Scatter Plot: Rating vs Distance
            const scatterData = storeData.map(s => ({
                x: s.distance,
                y: s.rating,
                name: s.name,
                cat: s.category
            }));

            const ctxScat = document.getElementById('scatterChart').getContext('2d');
            new Chart(ctxScat, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Stores',
                        data: scatterData,
                        backgroundColor: (ctx) => {
                            const val = ctx.raw?.cat;
                            if(val === 'Fashion') return '#EF4444';
                            if(val === 'Quilting') return '#22C55E';
                            return '#3B82F6';
                        },
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { 
                            title: { display: true, text: 'Distance from 75025 (Miles)' },
                            min: 0 
                        },
                        y: { 
                            title: { display: true, text: 'Store Rating (Unique Selection)' },
                            min: 3.5,
                            max: 5.0
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw.name + ': ' + context.raw.y + '‚òÖ (' + context.raw.x + 'mi)';
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
